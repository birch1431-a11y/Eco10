<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ğŸ”„ ê¸€ë¡œë²Œ ê²½ì œ ìƒí™©íŒ (ë³µêµ¬ëª¨ë“œ)</title>
    <style>
        body { background-color: #121212; color: #e0e0e0; font-family: -apple-system, sans-serif; padding: 15px; margin: 0; }
        .header { text-align: center; font-size: 1.1rem; font-weight: bold; margin-bottom: 25px; color: #c5a059; cursor: pointer; padding: 10px; border: 1px solid #444; border-radius: 8px; }
        .hr-short { border: 0; border-top: 2px solid #c5a059; width: 30px; margin: 5px 0 10px 0; }
        .category { margin-top: 25px; font-size: 0.95rem; color: #ffffff; font-weight: bold; }
        .item-row { display: flex; justify-content: space-between; align-items: center; padding: 10px 5px; border-bottom: 1px solid #222; }
        .label { font-size: 0.95rem; color: #bbbbbb; } 
        .val-container { text-align: right; }
        .value { font-size: 1rem; font-weight: 600; font-family: 'Roboto Mono', monospace; color: #ffffff; display: block; }
        .change { font-size: 0.75rem; margin-top: 2px; }
        .up { color: #ff4444; } .down { color: #4488ff; }
        .status-danger { color: #ff4444 !important; } .status-warning { color: #ffbb33 !important; } .status-safe { color: #00ff88 !important; }
        #status-msg { text-align:center; font-size:0.7rem; color:#888; margin: 30px 0; }
        .loading { color: #555 !important; font-style: italic; font-size: 0.8rem; }
    </style>
</head>
<body>

    <div class="header" onclick="location.reload()">ğŸ”„ ê¸€ë¡œë²Œ ê²½ì œ ìƒí™©íŒ</div>

    <div class="category">ì™¸í™˜</div><hr class="hr-short">
    <div class="item-row"><span class="label">ë‹¬ëŸ¬ì§€ìˆ˜</span><div class="val-container"><span class="value loading" id="DXY">ì½ëŠ” ì¤‘...</span><div class="change" id="DXY-c"></div></div></div>
    <div class="item-row"><span class="label">ì›/ë‹¬ëŸ¬</span><div class="val-container"><span class="value loading" id="USD/KRW">ì½ëŠ” ì¤‘...</span><div class="change" id="USD/KRW-c"></div></div></div>
    <div class="item-row"><span class="label">ì›/ì—”</span><div class="val-container"><span class="value loading" id="JPY/KRW">ì½ëŠ” ì¤‘...</span><div class="change" id="JPY/KRW-c"></div></div></div>
    <div class="item-row"><span class="label">ì›/ìœ ë¡œ</span><div class="val-container"><span class="value loading" id="EUR/KRW">ì½ëŠ” ì¤‘...</span><div class="change" id="EUR/KRW-c"></div></div></div>
    <div class="item-row"><span class="label">ì›/ìœ„ì•ˆ</span><div class="val-container"><span class="value loading" id="CNY/KRW">ì½ëŠ” ì¤‘...</span><div class="change" id="CNY/KRW-c"></div></div></div>

    <div class="category">ì£¼ìš” ì¦ì‹œì§€í‘œ</div><hr class="hr-short">
    <div class="item-row"><span class="label">ë¯¸ ì‹œì´ ($T)</span><div class="val-container"><span class="value loading" id="US_MCAP">ì½ëŠ” ì¤‘...</span><div class="change" id="US_MCAP-c"></div></div></div>
    <div class="item-row"><span class="label">S&P 500</span><div class="val-container"><span class="value loading" id="SP500">ì½ëŠ” ì¤‘...</span><div class="change" id="SP500-c"></div></div></div>
    <div class="item-row"><span class="label">NASDAQ</span><div class="val-container"><span class="value loading" id="NASDAQ">ì½ëŠ” ì¤‘...</span><div class="change" id="NASDAQ-c"></div></div></div>
    <div class="item-row"><span class="label">DOW</span><div class="val-container"><span class="value loading" id="DOW">ì½ëŠ” ì¤‘...</span><div class="change" id="DOW-c"></div></div></div>
    <div class="item-row"><span class="label">í•œ ì‹œì´ (ì¡°â‚©)</span><div class="val-container"><span class="value loading" id="KR_MCAP">ì½ëŠ” ì¤‘...</span><div class="change" id="KR_MCAP-c"></div></div></div>
    <div class="item-row"><span class="label">KOSPI</span><div class="val-container"><span class="value loading" id="KOSPI">ì½ëŠ” ì¤‘...</span><div class="change" id="KOSPI-c"></div></div></div>
    <div class="item-row"><span class="label">ë‹¬ëŸ¬í™˜ì‚° KOSPI</span><div class="val-container"><span class="value loading" id="KOSPI_USD">ì½ëŠ” ì¤‘...</span><div class="change" id="KOSPI_USD-c"></div></div></div>
    <div class="item-row"><span class="label">KOSDAQ</span><div class="val-container"><span class="value loading" id="KOSDAQ">ì½ëŠ” ì¤‘...</span><div class="change" id="KOSDAQ-c"></div></div></div>

    <div class="category">ë¯¸êµ­ êµ­ì±„ ê¸ˆë¦¬</div><hr class="hr-short">
    <div class="item-row"><span class="label">30Y Yield</span><div class="val-container"><span class="value loading" id="US30Y">ì½ëŠ” ì¤‘...</span><div class="change" id="US30Y-c"></div></div></div>
    <div class="item-row"><span class="label">10Y Yield</span><div class="val-container"><span class="value loading" id="US10Y">ì½ëŠ” ì¤‘...</span><div class="change" id="US10Y-c"></div></div></div>
    <div class="item-row"><span class="label">2Y Yield</span><div class="val-container"><span class="value loading" id="US2Y">ì½ëŠ” ì¤‘...</span><div class="change" id="US2Y-c"></div></div></div>

    <div class="category">ì›ìì¬</div><hr class="hr-short">
    <div class="item-row"><span class="label">GOLD</span><div class="val-container"><span class="value loading" id="GOLD">ì½ëŠ” ì¤‘...</span><div class="change" id="GOLD-c"></div></div></div>
    <div class="item-row"><span class="label">SILVER</span><div class="val-container"><span class="value loading" id="SILVER">ì½ëŠ” ì¤‘...</span><div class="change" id="SILVER-c"></div></div></div>
    <div class="item-row"><span class="label">êµ¬ë¦¬</span><div class="val-container"><span class="value loading" id="COPPER">ì½ëŠ” ì¤‘...</span><div class="change" id="COPPER-c"></div></div></div>
    <div class="item-row"><span class="label">PLATINUM</span><div class="val-container"><span class="value loading" id="PLATINUM">ì½ëŠ” ì¤‘...</span><div class="change" id="PLATINUM-c"></div></div></div>
    <div class="item-row"><span class="label">WTIìœ </span><div class="val-container"><span class="value loading" id="WTI">ì½ëŠ” ì¤‘...</span><div class="change" id="WTI-c"></div></div></div>

    <div class="category">ê°€ìƒìì‚°</div><hr class="hr-short">
    <div class="item-row"><span class="label">BTC ($)</span><div class="val-container"><span class="value loading" id="BTC">ì½ëŠ” ì¤‘...</span><div class="change" id="BTC-c"></div></div></div>
    <div class="item-row"><span class="label">ETH ($)</span><div class="val-container"><span class="value loading" id="ETH">ì½ëŠ” ì¤‘...</span><div class="change" id="ETH-c"></div></div></div>
    <div class="item-row"><span class="label">XRP ($)</span><div class="val-container"><span class="value loading" id="XRP">ì½ëŠ” ì¤‘...</span><div class="change" id="XRP-c"></div></div></div>

    <div class="category">ì‹œì¥ ì‹¬ë¦¬ ë° ë°¸ë¥˜ì—ì´ì…˜</div><hr class="hr-short">
    <div class="item-row"><span class="label">VIX ì§€ìˆ˜</span><div class="val-container"><span class="value loading" id="VIX">ì½ëŠ” ì¤‘...</span><div class="change" id="VIX-c"></div></div></div>
    <div class="item-row"><span class="label">ì¥ë‹¨ê¸° ê¸ˆë¦¬ì°¨</span><div class="val-container"><span class="value loading" id="SPREAD">ì½ëŠ” ì¤‘...</span><div class="change" id="SPREAD-c"></div></div></div>
    <div class="item-row"><span class="label">ë²„í• ì§€ìˆ˜</span><div class="val-container"><span class="value" id="BUFFETT">--</span></div></div>
    <div class="item-row"><span class="label">ì‰´ëŸ¬ PER</span><div class="val-container"><span class="value" id="SHILLER">--</span></div></div>

    <div id="status-msg">ë°ì´í„° ì—”ì§„ ê°€ë™ ì¤‘...</div>

    <script>
        const API_KEY = "7142915ec1dc45caad56dfc9fcf07341";
        const GDP_US = 27.94;
        let cache = { k:0, u:0, y10:0, y2:0, kp:0, up:0, y10p:0, y2p:0 };

        async function fetchAPI(url) {
            const proxies = [
                `https://api.allorigins.win/get?url=${encodeURIComponent(url)}`,
                `https://corsproxy.io/?${encodeURIComponent(url)}`
            ];
            for (let p of proxies) {
                try {
                    const r = await fetch(p);
                    const j = await r.json();
                    return j.contents ? JSON.parse(j.contents) : j;
                } catch(e) {}
            }
            return null;
        }

        function setVal(id, c, p) {
            const el = document.getElementById(id); if(!el) return;
            el.classList.remove('loading');
            el.innerText = c > 1000 ? c.toLocaleString(undefined, {maximumFractionDigits:2}) : (id.includes('Y') || id === 'SPREAD' ? c.toFixed(3)+'%' : c.toFixed(2));
            
            const diff = c - p, pct = (diff/p*100).toFixed(2);
            const cEl = document.getElementById(id + "-c");
            if (cEl) cEl.innerHTML = `<span class="${diff>0?'up':'down'}">${diff>0?'â–²':'â–¼'} ${Math.abs(diff).toFixed(2)} (${pct}%)</span>`;
        }

        async function loadY(symbol, id) {
            const d = await fetchAPI(`https://query1.finance.yahoo.com/v8/finance/chart/${symbol}?interval=1m&range=1d`);
            if(!d?.chart?.result) return;
            const m = d.chart.result[0].meta, cur = m.regularMarketPrice, pre = m.previousClose;

            if (id === 'VTI_REF') {
                const mcap = 55.2 * (cur/pre);
                setVal("US_MCAP", mcap, 55.2);
                const bft = (mcap/GDP_US*100).toFixed(1);
                const bEl = document.getElementById("BUFFETT");
                bEl.innerText = bft + "%";
                bEl.className = "value " + (bft>=150?"status-danger":bft>=120?"status-warning":"status-safe");
            } else { setVal(id, cur, pre); }

            if(id==='KOSPI'){ cache.k=cur; cache.kp=pre; updateExtra(); setVal("KR_MCAP", 2450*(cur/pre), 2450); }
            if(id==='US10Y'){ cache.y10=cur; cache.y10p=pre; updateExtra(); }
            if(id==='US2Y'){ cache.y2=cur; cache.y2p=pre; updateExtra(); }
        }

        function updateExtra() {
            if(cache.k && cache.u) setVal("KOSPI_USD", cache.k/cache.u, cache.kp/cache.up);
            if(cache.y10 && cache.y2) {
                const s = cache.y10 - cache.y2, sp = cache.y10p - cache.y2p;
